<%= form_tag("/subscribe_user", method: "post") do %>
  <script
      src="https://checkout.razorpay.com/v1/checkout.js"
      data-key="<%= "#{Figaro.env.MERCHANT_KEY_ID}" %>"
      data-amount= 500000
      data-name="Sandeep"
      data-description="Subs 5000"
      data-image="/assets/3SC.png"
      data-prefill.name="Chourey"
      data-prefill.email="sandeep.chourey@3scsolution.com"
      data-theme.color="#F37254"
  >
  </script>
  <input type="submit" value="5000 inr per Yearly" class="razorpay-payment-button1">
  <input type="hidden" value="100" name="plan_id">
  <input type="hidden" value="200" name="customer_id">
<% end %>
<script>
$(document).ready(function(){
  var options = {
      "key": "<%= "#{Figaro.env.MERCHANT_KEY_ID}" %>",
      "amount": "5000",
      "name": "Sandeep",
      "description": "Hello",
      "image": "/assets/3SC.png",
      "handler": function (response){
        var mapForm = document.createElement("form");
        mapForm.target = "_self";
        mapForm.method = "POST"; // or "post" if appropriate
        mapForm.action = "/subscribe_user";

        var mapInput = document.createElement("input");
        mapInput.type = "text";
        mapInput.name = "payment_id";
        mapInput.value = response.razorpay_payment_id;
        mapForm.appendChild(mapInput);

        var mapInput2 = document.createElement("input");
        mapInput2.type = "text";
        mapInput2.name = "user_id";
        mapInput2.value = "10";

        var mapInput3 = document.createElement("input");
        mapInput3.type = "text";
        mapInput3.name = "product_id";
        mapInput3.value = "10";

        mapForm.appendChild(mapInput);
        mapForm.appendChild(mapInput2);
        mapForm.appendChild(mapInput3);

        mapForm.submit();

      },
      "prefill": {
          "name": "Sandeep Chourey",
          "email": "sandeep.chourey@3scsolution.com"
      },
      "notes": {
          "address": "Hello World"
      },
      "theme": {
          "color": "#198F69"
      }
  };
  $("#rzp-button1").click(function(e){
    var rzp1 = new Razorpay(options);
      rzp1.open();
      e.preventDefault();
  });

});
</script>